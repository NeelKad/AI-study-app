<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title }} - AI Study App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <style>
    body {
      background: linear-gradient(135deg, #0f172a, #1e1b4b);
      color: #f1f5f9;
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 2rem;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    .header a {
      color: #a5b4fc;
      font-size: 0.875rem;
      text-decoration: none;
      font-weight: 600;
    }
    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      color: #e0e7ff;
      margin-bottom: 1rem;
    }
    .note-card {
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
      border: 1px solid rgba(139, 92, 246, 0.4);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.2rem;
      box-shadow: 0 0 25px rgba(139, 92, 246, 0.3);
      max-height: 250px;
      overflow: hidden;
      transition: max-height 0.4s ease;
      white-space: pre-wrap;
      font-size: 1rem;
      color: #f9fafb;
      line-height: 1.6;
    }
    .note-card.expanded {
      max-height: 1000px;
    }
    .read-more-btn {
      display: block;
      margin: 0.5rem auto;
      background: #6366f1;
      color: #fff;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: 0.875rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    .read-more-btn:hover {
      background: #4f46e5;
      transform: scale(1.05);
    }
    .actions-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }
    .action-btn {
      background: linear-gradient(90deg, #6366f1, #7c3aed);
      color: #fff;
      border: none;
      padding: 0.9rem 1rem;
      border-radius: 0.75rem;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      box-shadow: 0 0 15px rgba(99, 102, 241, 0.4);
      text-decoration: none;
      display: block;
      text-align: center;
    }
    .action-btn:hover {
      background: linear-gradient(90deg, #4f46e5, #6d28d9);
      transform: translateY(-2px);
    }
    .action-btn.reel-btn {
      background: linear-gradient(90deg, #ec4899, #f59e0b);
      box-shadow: 0 0 15px rgba(236, 72, 153, 0.4);
    }
    .action-btn.reel-btn:hover {
      background: linear-gradient(90deg, #db2777, #f59e0b);
    }
  </style>
</head>
<body style="max-width: 900px; margin: 0 auto;">
  <!-- Back Navigation -->
  <div class="header">
    <a href="{{ url_for('dashboard') }}">&larr; Back</a>
  </div>

  <!-- Note Title -->
  <h1>{{ title }}</h1>

  <!-- Note Content -->
  <div id="noteContent" class="note-card">
    {{ content }}
  </div>

  {% if content|length > 400 %}
    <button id="toggleBtn" class="read-more-btn">Read More</button>
  {% endif %}

  <!-- Action Buttons -->
  <div class="actions-container">
    <button class="action-btn" onclick="navigateTo('flashcards')">üìö Flashcards</button>
    <button class="action-btn" onclick="navigateTo('questions')">‚ùì Question Generator</button>
    <button class="action-btn" onclick="navigateTo('summarise')">üìù Summarise Notes</button>
    <button class="action-btn" onclick="navigateTo('pastpaper')">üìã Generate Practice Paper</button>
    <button class="action-btn" onclick="navigateTo('tutor')">ü§ñ AI Study Tutor</button>
    <a href="{{ url_for('create_reel_page', note_id=note_id) }}" class="action-btn reel-btn">üé¨ Create Instagram Reel</a>
  </div>

  <script>
    const noteContent = {{ content | tojson | safe }};
    const noteId = {{ note_id }};
    const toggleBtn = document.getElementById("toggleBtn");
    const noteBox = document.getElementById("noteContent");

    if (toggleBtn) {
      toggleBtn.addEventListener("click", () => {
        noteBox.classList.toggle("expanded");
        toggleBtn.textContent = noteBox.classList.contains("expanded") ? "Read Less" : "Read More";
      });
    }

    function navigateTo(action) {
      sessionStorage.setItem("processedNotes", noteContent);
      window.location.href = `/${action}/${noteId}`;
    }
  </script>
</body>
</html>
